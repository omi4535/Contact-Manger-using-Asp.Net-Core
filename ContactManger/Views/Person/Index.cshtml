@using ServiceContract.DTO.Countries
@using ServiceContract.DTO.Person
@model IEnumerable<PersonRes>

@{
    ViewData["Title"] = "All People";
    var personCount = Model.Count();
}

<section class="hero">
    <h1 class="title">All People 👥</h1>
    <button id="openPersonModalBtn" class="btn-primary">➕ Add Person</button>
</section>

@if (personCount == 0)
{
    <div class="card" style="text-align:center;">
        <p style="color:var(--muted); font-style:italic; margin-bottom: 12px;">
            ⚠️ No people have been added yet.
        </p>
        <button id="openPersonModalBtn2" class="btn-primary">Add Person</button>
    </div>
}
else
{
    <div class="card">
        <table class="table">
            <thead>
                <tr>
                    <th hidden>ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Country</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var person in Model)
                {
                    <tr>
                        <td hidden>@person.Id</td>
                        <td>@person.FirstName</td>
                        <td>@person.LastName</td>
                        <td>@person.Email</td>
                        <td>@person.PhoneNumber</td>
                        <td>@person.CountryName</td> <!-- Later you can join with Country table -->
                        <td style="display:flex; gap:6px;">
                            <a onclick="PassDataToPartialView(@person.Id)" class="btn-primary btn-edit">Edit</a>
                            <a href="/Person/Delete/@person.Id" class="btn-secondary">Delete</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
<script>

        $(document).on('click', '.btn-edit', function() {
        var personId = $(this).data('id');
        PassDataToPartialView(personId);
    });
</script>
@{
    Html.RenderPartial("AddPersonPartial",new PersonAddReq());
}

